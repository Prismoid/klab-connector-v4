# CADDEテストベッド参加用資料

本資料は、データスペース技術国際テストベッド上に構築されるCADDEテストベッド参加時に必要となる、事前準備事項および環境構築・設定手順を示すものである。

※ 本ディレクトリに含まれる資料はCADDE公式の技術仕様を参考としつつ、説明の都合上、一部を省略・追加するなどの改変を行っている。
そのため、本資料に記載された内容が公式の技術仕様と一部異なる場合があることに注意すること。

CADDE公式の詳細な技術仕様については、[CADDE-sip/document](https://github.com/CADDE-sip/documents)というGitHubリポジトリから確認できる。

<!-- omit in toc -->
## 目次

- [1. CADDEテストベッド参加のための事前準備](#1-caddeテストベッド参加のための事前準備)
  - [1.1. CADDEテストベッド利用情報の取得](#11-caddeテストベッド利用情報の取得)
  - [1.2. CADDEテストベッド参加者環境のドメイン登録](#12-caddeテストベッド参加者環境のドメイン登録)
  - [1.3. CADDEテストベッド用TLS証明書の取得](#13-caddeテストベッド用tls証明書の取得)
- [2. CADDE参加者環境の構築](#2-cadde参加者環境の構築)
  - [2.1. データ提供者](#21-データ提供者)
  - [2.2. データ利用者](#22-データ利用者)
- [3. CADDEテストベッド用ドキュメント一覧](#3-caddeテストベッド用ドキュメント一覧)

## 1. CADDEテストベッド参加のための事前準備

### 1.1. CADDEテストベッド利用情報の取得

CADDEテストベッドの利用開始にあたって、各参加者は以下の情報をCADDEテストベッド運用者（東京大学）から受け取る。

- CADDEユーザアカウント
  - CADDEユーザID
  - 初期パスワード
- CADDEアプリケーションのクライアント情報
  - クライアントID
  - クライアントシークレット
- CADDE支援サービスの情報
  - 認証機能
  - 横断検索機能
  - 来歴管理機能

CADDEテストベッド利用情報に関する詳細は[userinfo.md](./userinfo.md)を参照する。

### 1.2. CADDEテストベッド参加者環境のドメイン登録

CADDEテストベッド参加者は、自らが利用するCADDEユーザアカウントごとに以下のアプリケーションのドメイン名を事前に登録する必要がある。

- データ提供者環境
  - 提供者コネクタ
  - 認可機能
  - 提供者カタログサイト
- データ利用者環境
  - 利用者コネクタ
  - 利用者WebApp

ドメイン登録は[**CADDEテストベッド ドメイン登録・証明書発行申請フォーム**（準備中）](./domain_registration.md)を用いる。

CADDEテストベッド参加者環境のドメイン登録に関する詳細は[domain_registration.md](./domain_registration.md)を参照する。

### 1.3. CADDEテストベッド用TLS証明書の取得

CADDEテストベッド参加者は、自らが構築・利用するアプリケーションサーバに配置するTLS証明書を事前に取得する必要がある。

CADDEテストベッドでは、テストベッド上のすべてのアプリケーションのTLSサーバ証明書をテストベッド用プライベート認証局から発行する。
また、TLS証明書の準備を簡単にするため、テストベッドネットワークに参加する組織ごとにワイルドカード証明書（マルチドメイン証明書）を発行することとする。

そこで、CADDEテストベッド参加者は、各自の環境で証明書署名要求（CSR, Certificate Signing Request）を作成し、以下のフォームからテストベッド用プライベート認証局に対してCSRファイルを送付する。

[**CADDEテストベッド ドメイン登録・証明書発行申請フォーム**（準備中）](./domain_registration.md)

TLS証明書を取得するための詳細な手順は[certificate.md](./certificate.md)を参照する。

## 2. CADDE参加者環境の構築

### 2.1. データ提供者

データ提供者環境は以下3つのアプリケーションで構成される。

1. 提供者コネクタ
2. 認可機能
3. 提供者カタログサイト

上記アプリケーションの構築完了後、データ提供者はCADDE上でデータ提供を行うために以下の設定を行う必要がある。

- データ原本情報の登録
- データカタログの作成
- 認可の設定
- 提供者コネクタとデータサーバの接続

以上の環境構築および設定の詳しい手順は[provider.md](./provider.md)を参照する。

### 2.2. データ利用者

データ利用者環境は以下2つのアプリケーションで構成される。

1. 利用者コネクタ
2. 利用者WebApp

上記アプリケーションの詳しい構築手順は[consumer.md](./consumer.md)を参照する。

## 3. CADDEテストベッド用ドキュメント一覧

| 資料                                                 | 概要                        |
| -------------------------------------------------- | ------------------------- |
| [userinfo.md](./userinfo.md)                       | CADDEテストベッド利用情報           |
| [domain_registration.md](./domain_registration.md) | CADDEテストベッド参加者環境のドメイン登録方法 |
| [certificate.md](./certificate.md)                 | CADDEテストベッド用TLS証明書の取得方法   |
| [provider.md](./provider.md)                       | データ提供者環境の構築・設定手順          |
| [consumer.md](./consumer.md)                       | データ利用者環境の構築手順             |
| [handson.md](./handson.md)                         | CADDEテストベッドハンズオン手順        |
